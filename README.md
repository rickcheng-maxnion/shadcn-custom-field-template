# Custom Form Field Template for shadcn/ui Registry Integration

æœ¬å°ˆæ¡ˆç‚ºè¡¨å–®æ¬„ä½å…ƒä»¶ï¼ˆform field componentï¼‰é–‹ç™¼çš„ç¯„æœ¬ï¼Œæä¾›çµ¦åˆä½œæ–¹ä¾ç…§æ—¢å®šè¦æ ¼å¯¦ä½œæ¬„ä½å…ƒä»¶ï¼Œä¸¦ä»¥ shadcn registry æ ¼å¼ç™¼ä½ˆã€‚å®Œæˆå¾Œï¼Œæˆ‘å€‘çš„ç³»çµ±å°‡å¯é€é CLI å®‰è£ä¸¦æ•´åˆä½ çš„å…ƒä»¶è‡³å‹•æ…‹è¡¨å–®ç³»çµ±ä¸­ã€‚

## âš¡ å¿«é€Ÿé–‹å§‹

```bash
# å®‰è£ä¾è³´
yarn

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆé è¨­ port ç‚º 5174ï¼‰
yarn dev
```

ä½ å¯ä»¥åœ¨æœ¬åœ°æ¸¬è©¦å…ƒä»¶çš„é–‹ç™¼ç‹€æ³ï¼Œä¸¦é€éé è¦½ç•«é¢æŸ¥çœ‹å…ƒä»¶æ¸²æŸ“èˆ‡äº’å‹•è¡Œç‚ºæ˜¯å¦æ­£ç¢ºã€‚

## ğŸ§ª ç¯„ä¾‹èˆ‡é–‹ç™¼å…¥å£

æœ¬å°ˆæ¡ˆå·²é è¨­ä¸€å€‹ç¯„ä¾‹æ¬„ä½å…ƒä»¶ `SelectField`ï¼Œæ”¾ç½®æ–¼ `registry/maxnion/select-field/` è³‡æ–™å¤¾å…§ï¼Œå°æ‡‰å…ƒä»¶å±•ç¤ºç•«é¢å¦‚åœ–ï¼š

- ä¸ŠåŠéƒ¨ç‚ºå…ƒä»¶é è¦½ï¼ˆå°æ‡‰ä¸‰ç¨®ç‹€æ…‹ï¼šå»ºç«‹ Buildã€å¡«å¯« Fillã€æª¢è¦– Reviewï¼‰
- ä¸‹åŠéƒ¨ç‚º JSON Schema / UI Schema / Form Data çš„å³æ™‚é¡¯ç¤º

é–‹ç™¼æ™‚ä½ å¯ä»¥åœ¨ `App.tsx` ä¸­ï¼š

- å¼•å…¥ä½ è‡ªè¨‚çš„æ¬„ä½å…ƒä»¶è¨­å®š
- æ¸¬è©¦åœ¨ build / fill / review ç‹€æ…‹ä¸‹çš„è¡¨ç¾
- é è¦½ä½ è¨­è¨ˆçš„ schema / uiSchema / formData æ˜¯å¦æ­£ç¢ºæ¸²æŸ“

ä½ æ‡‰è©²ä»¿ç…§æ­¤çµæ§‹å»ºç«‹ä½ è‡ªå·±çš„æ¬„ä½å…ƒä»¶ï¼Œä¾‹å¦‚ï¼š

```
registry/
  my-company/
    custom-field/
      index.ts
      devTypes.ts
      CustomField.tsx
```

åœ¨ `App.tsx` ä¸­å¼•å…¥ `CustomFieldConfig`ï¼Œå°±å¯ä»¥ç”¨ä¾†æ¸¬è©¦èˆ‡é©—è­‰ã€‚

---

## ğŸ”§ Component é–‹ç™¼è¦ç¯„

é€™å€‹ç« ç¯€å°‡èªªæ˜å¦‚ä½•å»ºç«‹ç¬¦åˆæˆ‘å€‘è¦ç¯„çš„æ¬„ä½å…ƒä»¶ componentï¼ŒåŒ…å«æ•´é«”çµæ§‹ã€è¨»å†Šè¨­å®šèˆ‡å…ƒä»¶å¯¦ä½œåŸå‰‡ã€‚

### 1. çµæ§‹ç¸½è¦½ï¼šä½ æ‡‰è©²æä¾›å“ªäº›æª”æ¡ˆ

è«‹ä¾ç…§ä»¥ä¸‹ç¯„ä¾‹å»ºç«‹ä½ çš„æ¬„ä½å…ƒä»¶è³‡æ–™å¤¾ï¼Œæª”æ¡ˆçµæ§‹å¦‚ä¸‹ï¼š

```
registry/
  your-field-name/
    index.ts          # åŒ¯å‡º FieldConfigï¼ˆè«‹ä¿ç•™å‘½åï¼‰
    CustomField.tsx   # å¯¦éš›å…ƒä»¶å¯¦ä½œï¼ˆæª”åå¯è‡ªè¨‚ï¼‰
    devTypes.ts       # é¡å‹å®šç¾©ï¼ˆè«‹å‹¿ä¿®æ”¹ï¼‰
```

> ğŸ“Œ **è«‹éµå®ˆä»¥ä¸‹è¦ç¯„ï¼š**
>
> - `devTypes.ts` ç‚ºæˆ‘å€‘å…§éƒ¨ç³»çµ±æ‰€ä¾è³´çš„å‹åˆ¥å®šç¾©ï¼Œ**è«‹å‹¿æ›´å‹•å…§å®¹**ï¼Œå¦å‰‡å¯èƒ½å°è‡´è¼‰å…¥å¤±æ•—æˆ–å‹åˆ¥ä¸ç›¸å®¹ã€‚å°‡ä¾†æœƒæ”¹ç‚ºå¤–éƒ¨å¥—ä»¶æä¾›åŒ¯å…¥ã€‚
> - å…ƒä»¶å¯¦ä½œæª”æ¡ˆéœ€åŒ¯å‡ºä¸€å€‹ React Componentï¼Œæ¥æ”¶ `FieldProps` ä½œç‚º propsã€‚
> - ä½¿ç”¨ `index.ts` åŒ¯å‡ºä¸€å€‹ç¬¦åˆ `FieldConfig` ä»‹é¢çš„ç‰©ä»¶ï¼Œå‘½åç‚º `field`ã€‚æˆ‘å€‘çš„ç³»çµ±æœƒå¾é€™è£¡è¼‰å…¥æ¬„ä½è¨­å®šèˆ‡å…ƒä»¶ã€‚

### 2. è¨»å†Šè¨­å®šï¼ˆindex.tsï¼‰

åœ¨ `index.ts` ä¸­ï¼Œä½ éœ€è¦åŒ¯å‡ºä¸€å€‹ `FieldConfig` ç‰©ä»¶ï¼Œå…§å®¹åŒ…å«ï¼š

- `meta`ï¼šæ¬„ä½åœ¨ UI ä¸­çš„é¡¯ç¤ºè¨­å®šï¼ˆå¦‚åç¨±èˆ‡ iconï¼‰ï¼Œæœƒå‡ºç¾åœ¨æ–°å¢æ¬„ä½ä¸‹æ‹‰é¸å–®ä¸­
- `createInitialSchema`ï¼šå»ºç«‹æ¬„ä½æ™‚ä½¿ç”¨çš„é è¨­ schemaï¼ˆéœ€ç¬¦åˆ JSONSchemaï¼Œç›®å‰ä½¿ç”¨ AJV Validator é è¨­ Draft-07 ç‰ˆæœ¬ï¼Œå¯åƒè€ƒ[å®˜æ–¹æ–‡ä»¶](https://json-schema.org/)ï¼‰
- `createInitialUiSchema`ï¼šæ¬„ä½é è¨­çš„ UI è¡Œç‚ºå®šç¾©ï¼Œç‚ºé¸å¡«ï¼Œå‹åˆ¥ç‚º objectï¼Œå¸¸ç”¨æ–¼å‚³å…¥å¦‚ placeholderã€widget ç­‰å®¢è£½åŒ–è¨­å®š
- `component`ï¼šå¯¦éš›çš„æ¬„ä½å…ƒä»¶ component

é€™å€‹è¨­å®šæª”æ˜¯æˆ‘å€‘ CLI èˆ‡è¡¨å–®ç³»çµ±æ•´åˆæ™‚çš„å”¯ä¸€å…¥å£ã€‚

### 3. Component å…ƒä»¶å¯¦ä½œï¼ˆCustomField.tsxï¼‰

ä½ å¯ä»¥è‡ªç”±å¯¦ä½œ componentï¼Œåªè¦ç¬¦åˆä»¥ä¸‹åŸå‰‡ï¼š

- æ­£ç¢ºè™•ç†å‚³å…¥çš„ `schema / uiSchema / value`
- æ ¹æ“š `mode`ï¼ˆbuild / fill / reviewï¼‰æ±ºå®šå…ƒä»¶é¡¯ç¤ºèˆ‡äº’å‹•è¡Œç‚º
- è«‹ä½¿ç”¨ shadcn/ui æä¾›çš„å…ƒä»¶é€²è¡Œæ¬„ä½ UI å¯¦ä½œ

æˆ‘å€‘ä¸æœƒé™åˆ¶ä½ çš„ UI å¯¦ä½œç´°ç¯€ï¼Œåªè¦æ±‚ props èˆ‡è¡Œç‚ºä¸€è‡´ã€‚è‹¥è¦å¿«é€Ÿåƒè€ƒå¯¦ä½œï¼Œå¯è¤‡è£½ `registry/maxnion/select-field/` è³‡æ–™å¤¾ä¸­çš„å…§å®¹ã€‚

## ğŸ“‹ shadcn registry è¨­å®šæª”ï¼ˆregistry.jsonï¼‰

é€™å€‹è¨­å®šæª”å®šç¾©äº†å…ƒä»¶çš„è¨»å†Šè³‡è¨Šï¼Œè®“æˆ‘å€‘çš„ CLI å¯ä»¥æ­£ç¢ºè¼‰å…¥å…ƒä»¶ã€‚å®Œæ•´æ ¼å¼èˆ‡æ¬„ä½èªªæ˜è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼š

ğŸ‘‰ [shadcn/ui Registry èªªæ˜æ–‡ä»¶](https://ui.shadcn.com/docs/registry)

ä»¥ä¸‹æ˜¯æˆ‘å€‘å°ˆæ¡ˆä¸­ä½¿ç”¨çš„ `registry.json` ç°¡åŒ–ç¯„ä¾‹ï¼š

```jsonc
{
  // ...
  "items": [
    {
      "name": "your-field-name",
      "type": "registry:component",
      "dependencies": ["lucide-react", "react-hook-form"],
      "registryDependencies": ["input", "button"],
      "files": [
        {
          "path": "registry/your-scope/your-field/index.ts",
          "target": "your-scope/form/your-field/index.ts"
        }
        // ...
      ]
    }
  ]
}
```

> ğŸ“Œ è«‹ä¾ç…§ shadcn/ui registry çš„æ ¼å¼å¡«å¯« `registry.json`ï¼š
>
> - `name`: å…ƒä»¶è­˜åˆ¥åç¨±ï¼Œè‡ªè¨‚å‘½åå³å¯ï¼ˆå»ºè­°èˆ‡è³‡æ–™å¤¾ä¸€è‡´ï¼‰
> - `type`: æ‡‰ç‚º `registry:component`ï¼Œé€™æ˜¯å…ƒä»¶çš„å¸¸è¦‹ä½¿ç”¨æ–¹å¼ï¼Œ**å»ºè­°**ç¬¦åˆ registry èªæ„
> - `dependencies` / `devDependencies`: å¯¦éš›ä½¿ç”¨åˆ°çš„ npm å¥—ä»¶ï¼Œè«‹ç…§å¯¦å¡«å¯«
> - `registryDependencies`: ä½¿ç”¨åˆ°çš„ shadcn å…ƒä»¶ï¼ˆå¦‚ button, input ç­‰ï¼‰
> - `files`: ä½ çš„å…ƒä»¶å¯¦ä½œæª”æ¡ˆï¼Œè«‹ç¢ºèª `path` ç‚ºå¯¦éš›è·¯å¾‘ï¼Œ`target` è«‹ä¾ç…§ `your-scope/form/your-field-name/xxx` æ ¼å¼å‘½åã€‚**åŒä¸€å€‹æ¬„ä½å…ƒä»¶çš„æ‰€æœ‰ target æ‡‰ç½®æ–¼ç›¸åŒè³‡æ–™å¤¾ä¸‹ï¼Œä»¥é¿å…ç”¢ç”Ÿåˆ†æ•£è·¯å¾‘ã€‚**

## ğŸš€ å»ºç«‹ã€æ¸¬è©¦èˆ‡ç™¼å¸ƒ Registry

### 1. å»ºç½® registry JSON

```bash
yarn registry:build
```

é€™æœƒç”¢å‡º registry JSON æª”æ¡ˆæ–¼ `public/r/your-field-name.json`ã€‚

### 2. æœ¬åœ°æ¸¬è©¦ registry JSON

```bash
yarn dev
```

é–‹å•Ÿä»¥ä¸‹ç¶²å€ï¼ˆé è¨­ port ç‚º `5174`ï¼‰ï¼š

```
http://localhost:5174/r/your-field-name.json
```

ç¢ºèªæ˜¯å¦å¯æ­£ç¢ºè®€å–èˆ‡è§£æ registry è¨­å®šï¼Œä¸¦å¯è‡ªè¡Œé€é CLI æ¸¬è©¦å®‰è£æ˜¯å¦æˆåŠŸï¼š

```bash
npx shadcn@latest add http://localhost:5174/r/your-field-name.json
```

### 3. éƒ¨ç½²ä¸¦æä¾›å®‰è£é€£çµ

ä½ å¯ä»¥å°‡ registry ç™¼å¸ƒåˆ°å…¬é–‹ç¶²å€ï¼Œè®“å…¶ä»–é–‹ç™¼è€…é€é shadcn CLI å®‰è£ä½¿ç”¨ã€‚

ä½ æ‡‰å°‡ JSON æª”æ¡ˆéƒ¨ç½²è‡³å…¬é–‹ç¶²å€ï¼ˆå¦‚ GitHub Pagesã€Vercelã€S3 ç­‰ï¼‰ã€‚

æˆ‘å€‘çš„åœ˜éšŠæœƒä½¿ç”¨é€™å€‹é€£çµï¼Œé€é CLI å®‰è£ä½ çš„å…ƒä»¶ï¼š

```bash
npx shadcn@latest add https://your-cdn.com/public/r/your-field-name.json
```

---
